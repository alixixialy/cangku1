<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title>注册</title>
    <style>
        .error {color: #dc6868;}
    </style>
</head>
<body>
<?php echo date("Y-m-d")." ";?>
<?php
// 定义变量并默认设置为空值
$nameErr = $emailErr = $idErr =$passwordErr= "";
$name =$id = $comment = $password ="";

if ($_SERVER["REQUEST_METHOD"] == "POST")
{
    if (empty($_POST["name"]))
    {
        $nameErr = "名字是必需的";
    }
    else
    {
        $name = test_input($_POST["name"]);
        // 检测名字是否只包含字母跟空格
        if (!preg_match("/^[a-zA-Z ]*$/",$name))
        {
            $nameErr = "只允许字母和空格";
        }
    }

    if (empty($_POST["id"]))
    {
        $id = "id是必需的";
    }
    else
    {
        $id = test_input($_POST["id"]);
    }

    if (empty($_POST["password"]))
    {
        $password = "密码是必需的";
    }
    else
    {
        $password = test_input($_POST["password"]);
    }
}

function test_input($data)
{
    $data = trim($data);
    $data = stripslashes($data);
    return $data;
}
?>

<h2>注册</h2>
<p><span class="error">* 必需字段。</span></p>
<form method="post" action="work3.php">
    名字: <input type="text" name="name" value="<?php echo $name;?>">
    <span class="error">* <?php echo $nameErr;?></span>
    <br><br>
    学号:<input type="text" name="id" value="<?php echo $id;?>">
    <span class="error">*<?php echo $idErr;?></span>
    <br><br>
    密码: <input type="text" name="password" value="<?php echo $password;?>">
    <span class="error">* <?php echo $passwordErr;?></span>
    <br><br>
    <input type="submit" name="submit" value="登录">
</form>

</body>
</html>
